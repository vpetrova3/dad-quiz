<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–¢–µ—Å—Ç –∑–∞ –¢–∞—Ç–∫–æ</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #f8f9fa, #e3f2fd);
      color: #333;
      text-align: center;
      padding: 2rem;
    }
    .quiz-container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 15px 30px rgba(0,0,0,0.1);
      transition: opacity 0.5s ease-in-out;
    }
    h1 {
      margin-bottom: 1rem;
      color: #2b2d42;
    }
    .question {
      margin-bottom: 1rem;
      font-size: 1.2rem;
      font-weight: bold;
    }
    .answers button, #retry-btn {
      display: block;
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.5rem;
      font-size: 1rem;
      border-radius: 12px;
      border: none;
      background-color: #dfefff;
      cursor: pointer;
      transition: 0.3s;
    }
    .answers button:hover, #retry-btn:hover {
      background-color: #b2d7ff;
    }
    .hidden {
      display: none;
    }
    #result {
      font-size: 1.3rem;
      margin-top: 2rem;
    }
    #confetti-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
    }
    #dad-photo {
      max-width: 100%;
      border-radius: 15px;
      margin-top: 1rem;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <canvas id="confetti-canvas"></canvas>
  <audio autoplay loop>
    <source src="https://files.catbox.moe/sj9zrp.mp3" type="audio/mpeg">
  </audio>
  <div class="quiz-container" id="quiz-container">
    <h1>–ö–æ–ª–∫–æ –¥–æ–±—Ä–µ –ø–æ–∑–Ω–∞–≤–∞—à –¢–∞—Ç–∫–æ?</h1>
    <div id="quiz"></div>
    <div id="result" class="hidden"></div>
  </div>

  <script>
    const questions = [...]; // (keeping same questions array for brevity)

    const quizContainer = document.getElementById("quiz");
    const resultContainer = document.getElementById("result");
    const quizBox = document.getElementById("quiz-container");
    let currentQuestion = 0;
    let correctAnswers = 0;

    function showQuestion() {
      quizBox.style.opacity = 0;
      setTimeout(() => {
        const q = questions[currentQuestion];
        quizContainer.innerHTML = `
          <div class="question">${q.question}</div>
          <div class="answers">
            ${q.answers.map((answer, index) => `
              <button onclick="submitAnswer(${index})">${answer}</button>
            `).join('')}
          </div>
        `;
        quizBox.style.opacity = 1;
      }, 300);
    }

    function submitAnswer(selected) {
      if (selected === questions[currentQuestion].correct) {
        correctAnswers++;
      }
      currentQuestion++;
      if (currentQuestion < questions.length) {
        showQuestion();
      } else {
        quizContainer.classList.add("hidden");
        resultContainer.classList.remove("hidden");
        const score = Math.round((correctAnswers / questions.length) * 100);
        let message = "";
        if (score === 100) {
          message = "üéâ –ë—Ä–∞–≤–æ! –¢–∏ –ø–æ–∑–Ω–∞ –≤—Å–∏—á–∫–∏ –æ—Ç–≥–æ–≤–æ—Ä–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ! üéâ";
          launchConfetti();
        } else if (score >= 70) {
          message = `üëè –î–æ–±—ä—Ä —Ä–µ–∑—É–ª—Ç–∞—Ç! ${score}% —Ç–æ—á–Ω–æ—Å—Ç.`;
        } else {
          message = `üòÖ –ò–º–∞ –∫–∞–∫–≤–æ –¥–∞ —É—á–∏—à –∑–∞ –¢–∞—Ç–∫–æ! ${score}% –ø—Ä–∞–≤–∏–ª–Ω–∏ –æ—Ç–≥–æ–≤–æ—Ä–∏.`;
        }
        resultContainer.innerHTML = `
          ${message}<br>
          <img id="dad-photo" src="tati.jpg" alt="–¢–∞—Ç–∫–æ">
          <p><strong>‚Äû–ò –¥–∞ –∑–Ω–∞–µ—à ‚Äî Nautilus-—ä—Ç –∏–¥–≤–∞ –µ–¥–∏–Ω –¥–µ–Ω. –û–±–µ—â–∞–≤–∞–º!‚Äú</strong></p>
          <button id="retry-btn" onclick="restartQuiz()">üîÅ –û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ</button>
        `;
      }
    }

    function restartQuiz() {
      currentQuestion = 0;
      correctAnswers = 0;
      resultContainer.classList.add("hidden");
      quizContainer.classList.remove("hidden");
      showQuestion();
    }

    showQuestion();

    function launchConfetti() {
      const confettiScript = document.createElement("script");
      confettiScript.src = "https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js";
      confettiScript.onload = () => {
        const duration = 5 * 1000;
        const end = Date.now() + duration;
        (function frame() {
          confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, zIndex: 1000 });
          confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, zIndex: 1000 });
          if (Date.now() < end) requestAnimationFrame(frame);
        })();
      };
      document.body.appendChild(confettiScript);
    }
  </script>
</body>
</html>
